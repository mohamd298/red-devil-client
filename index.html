<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Красный дьявол</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <style>
    body { background:black; color:#ff1a1a; font-family: Arial; margin:0; }
    h1 { text-align:center; margin:10px 0; }
    #chat { height:65vh; overflow-y:auto; border:1px solid red; margin:10px; padding:5px; }
    .msg { padding:4px; animation:fade 0.3s; }
    @keyframes fade { from{opacity:0;} to{opacity:1;} }
    #controls { display:flex; gap:5px; padding:10px; }
    input { flex:1; background:black; border:1px solid red; color:red; padding:6px; }
    button { background:red; color:black; border:none; padding:6px 12px; }
  </style>
</head>
<body>

<h1>Красный дьявол</h1>
<div id="chat"></div>

<div id="controls">
  <input id="msg" placeholder="اكتب رسالتك..." />
  <button onclick="send()">إرسال</button>
</div>

<script>
  // ضع رابط Render هنا
  const socket = io("https://red-devil-server.onrender.com", { auth: { token:"test", admin:true } });

  const chat = document.getElementById("chat");

  socket.on("connect", () => { console.log("Connected!"); });
  socket.on("new-message", data => {
    const div = document.createElement("div");
    div.className = "msg";
    div.textContent = data.data;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  });

  function send() {
    const input = document.getElementById("msg");
    if(!input.value) return;
    socket.emit("send-message", input.value);
    input.value = "";
  }
</script>

</body>
</html>
